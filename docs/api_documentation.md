# API Docs
## Generating Docs
Docs are autogenerated based off of the requests specs, no extra code is needed.

The specs are run with the OPENAPI env var set to trigger the doc generation, it is set on pushes to main.
An autolabeler action takes care of labeling for any PR that changes the `spec/requests/api` files.

*The label has to be created before hand for the labeler to work*
### Removing CI action
If you wish not to have a specific action to update the docs for you in the CI you can just modify the file:
```diff
- name: Set ENV for api docs
- if: github.event_name == 'push' && github.ref == 'refs/heads/main'
- run: echo "OPENAPI=true" >> $GITHUB_ENV

...

name: Run Tests
env:
  KNAPSACK_CI_NODE_TOTAL: ${{ matrix.ci_node_total }}
  KNAPSACK_CI_NODE_INDEX: ${{ matrix.ci_node_index }}
  PARALLEL_TESTS_CONCURRENCY: ${{ env.cpu_cores }}
- OPENAPI: ${{ env.OPENAPI }}

...

- name: Merge API docs
- env:
-   CI_NODE_INDEX: ${{ matrix.ci_node_index }}
- if: github.event_name == 'push' && github.ref == 'refs/heads/main'
- run: bundle exec ./bin/merge-api-docs.rb
- name: Upload partial api docs
- if: github.event_name == 'push' && github.ref == 'refs/heads/main'
- uses: actions/upload-artifact@v2
- with:
-   name: api_docs
-   path: "tmp/openapi${{ matrix.ci_node_index }}.yaml"
```
Also remove the `merge-results` job.
