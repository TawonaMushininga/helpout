#!/usr/bin/env ruby
require 'shellwords'
require_relative 'helpers'

if running_with_docker?
  compose_command = 'docker compose -f docker-compose.yml -f docker-compose.test.yml run web bundle exec rspec'
  exec "ITERATIONS=#{ENV['ITERATIONS']} #{compose_command} #{Shellwords.join(ARGV)}"
else
  require 'bundler/setup'
  load Gem.bin_path('rspec-core', 'rspec')
end
